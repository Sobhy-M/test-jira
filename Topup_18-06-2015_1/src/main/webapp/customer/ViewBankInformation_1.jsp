

<%@page import="java.util.Map"%>
<%@page import="java.util.ArrayList"%>
<%--
    Document   : ViewBankInformation.jsp
    Created on : 06/05/2009, 11:09:49 ?
    Author     : Melad
--%>

<%@page import="java.util.Calendar"%>
<%@page import="java.text.SimpleDateFormat"%>
<%@page import="java.util.Date"%>
<%@page contentType="text/html" pageEncoding="UTF-8"%>
<%@page import="com.masary.common.CONFIG"%>
<%@page import="com.masary.database.manager.MasaryManager"%>
<%@page import="com.masary.database.dto.*"%>
<%@page import="java.util.List"%>
<%@page import="java.text.DecimalFormat"%>

<link href="img/style<%=request.getSession().getAttribute(CONFIG.lang)%>.css" rel="stylesheet" type="text/css">
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
    "http://www.w3.org/TR/html4/loose.dtd">
<% int startOfLoop = 0;
    int endOfLoop = 10;
    List transFromAg_1 = null;
    List transToAg = null;
    List sumOfTrans = null;
    int length;
    int al;
%>
<%
    Map<String, String> requestParameters = (Map<String, String>) session.getAttribute(CONFIG.REQUEST_PARAMETERS);
    String xx = null;
    try {
        xx = requestParameters.get("al");
        if (xx != null) {
            endOfLoop = Integer.parseInt(xx);
        }
    } catch (NullPointerException ex) {
    }
    startOfLoop = endOfLoop - 10;

    String role = (String) request.getSession().getAttribute(CONFIG.PARAM_ROLE);
    if (role == null) {
        response.sendRedirect(CONFIG.APP_ROOT + CONFIG.PAGE_LOGIN);
        return;
    }
%>
<%
    session = request.getSession();
    ArrayList<CustomerServiceDTO> serviceList = (ArrayList<CustomerServiceDTO>) session.getAttribute("services");
    transFromAg_1 = (List) session.getAttribute("transFromAg_1");
    transToAg = (List) session.getAttribute("transToAg");
    sumOfTrans = (List) session.getAttribute("sumOfTrans");
%>

<html>
    <head>
        <style  type="text/css">
            #servDiv {
                overflow: auto;
                azimuth: leftwards;
                height: 205px;
                width: 250px;
                overflow-y: scroll;
                border:1px ; 
            }
        </style>
        <script language="javascript" type="text/javascript" src="agent/datetimepicker.js"></script>
        <script type="text/javascript">
            var fieldID = 'chkName';
            function selectall() {
                var i = document.getTransAg.elements.length;
                var e = document.getTransAg.elements;
                var name = new Array();
                var value = new Array();
                var j = 0;
                for (var k = 0; k < i; k++)
                {
                    if (document.getTransAg.elements[k].id == fieldID)
                    {
                        if (document.getTransAg.elements[k].checked == true) {
                            value[j] = document.getTransAg.elements[k].value;
                            j++;
                        }
                    }
                }
                checkSelect();
            }
            function selectCheck(obj)
            {
                var i = document.getTransAg.elements.length;
                for (var k = 0; k < i; k++)
                {
                    if (document.getTransAg.elements[k].id == fieldID)
                    {
                        document.getTransAg.elements[k].checked = obj;
                    }
                }
                selectall();
            }
            function selectallMe()
            {
                if (document.getTransAg.allCheck.checked == true)
                {
                    selectCheck(true);
                } else
                {
                    selectCheck(false);
                }
            }
            function checkSelect()
            {
                var i = document.getTransAg.elements.length;
                var berror = true;
                for (var k = 0; k < i; k++)
                {
                    if (document.getTransAg.elements[k].id == fieldID)
                    {
                        if (document.getTransAg.elements[k].checked == false)
                        {
                            berror = false;
                            break;
                        }
                    }
                }
                if (berror == false)
                {
                    document.getTransAg.allCheck.checked = false;
                } else
                {
                    document.getTransAg.allCheck.checked = true;
                }
            }
            var mydiv = document.getElementById('mydiv');

        </script>

        <meta http-equiv="Content-Type" content="text/html; charset=windows-1256">
        <title><%=CONFIG.getTransactions(session)%></title>
    </head>
    <BODY class="body" <%=session.getAttribute("agentServices") == null ? "onload='selectallMe()'" : ""%>  >
        <div id ="menu">
            <%if (request.getSession().getAttribute(CONFIG.lang).equals("")) {%>
            <jsp:include page="../img/menuList.jsp"></jsp:include>
            <%} else {%>
            <jsp:include page="../img/menuListar.jsp"></jsp:include>                         <%}%>
            </div>
            <div class="content_body">   
                <form name="getTransAg" action="<%=CONFIG.APP_ROOT%>walletServices" method="post" onsubmit="submitForm()" align="center" >
                <table align="menu" style="margin-right: 100px; margin-bottom:0px; " cellspacing="20 px" >
                    <tr>
                        <td>
                            <%--<h2>Last transactions</h2>--%>
                            <table border="1" style="border-color: #AACCDE; border-left-color: #AACCDE;border-right-color: #AACCDE;border-top-color: #AACCDE;border-bottom-color: #AACCDE;">
                                <thead>
                                    <tr>
                                        <th rowspan="2">
                                            <h3> <b>  <%=CONFIG.getclientDate(session)%> : </b></h3>
                                        </th>
                                    </tr>
                                </thead>
                                <tr>
                                    <td>
                                        <%=CONFIG.getFrom(session)%> :
                                    </td>
                                    <td>
                                        <%  Calendar cal = Calendar.getInstance();
                                            cal.set(Calendar.DATE, cal.getActualMinimum(Calendar.DATE));
                                            Date firstDayOfMonth = cal.getTime();%>
                                        <input type="text" class="text" id="From" name="From" tabindex="4" value="<%=requestParameters.get("From") == null ? new SimpleDateFormat("dd-MM-yyyy").format(firstDayOfMonth) : requestParameters.get("From")%>" />
                                        <a href="javascript:NewCal('From','ddmmyyyy')"><img src="bill/cal.gif" width="16" height="16" border="0" alt="Pick a date"/></a>
                                    </td>  
                                </tr>
                                <tr>
                                    <td>
                                        <%=CONFIG.getTo(session)%> :
                                    </td>
                                    <td>
                                        <input type="text" class="text" id="To" name="To" tabindex="4" value="<%=requestParameters.get("To") == null ? new SimpleDateFormat("dd-MM-yyyy").format(new Date()) : requestParameters.get("To")%>" />
                                        <a href="javascript:NewCal('To','ddmmyyyy')"><img src="bill/cal.gif" width="16" height="16" border="0" alt="Pick a date"/></a>
                                    </td>  
                                </tr>    
                            </table>
                            <table align="right" style="border-color: #AACCDE; ">
                                <input type="hidden" name="action"  value="<%=CONFIG.ACTION_INCLUDE_Earn_List%>" />
                                <thead><tr><td><input type="submit" style="height: 37px; width: 77px"  name="btnSubmit" value="<%=CONFIG.getGo(session)%>"/></td></tr></thead>
                            </table>

                        </td>

                    </tr>
                </table>
            </form>
            <div align="right" >        
                <%
                    try {
                        if (session.getAttribute("include") == "transFromAg_1") {
                            length = transFromAg_1.size();
                            String page1 = "../customer/TransactionFromAg_1.jsp?al=" + endOfLoop;
                %>
                <jsp:include page="<%=page1%>"></jsp:include>
                <%             }
                    } catch (NullPointerException ex) {
                        MasaryManager.logger.error(ex);
                    }
                    endOfLoop = 10;
                %>
            </div>
        </div><!-- End of Table Content area-->
        <!-- End content body -->
        <div style="clear: both;">&nbsp;</div>

    </div><!-- End of Main body-->

</body>
</html>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      